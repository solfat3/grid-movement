let pillars: Sprite[] = [];
pillars.push(sprites.create(img`
    ........................
    ........................
    ..........bbbb..........
    ........bbddddbb........
    .......bddbbbbddb.......
    ......bdbbddddbbdb......
    .....bdbbdbbbbdbbdb.....
    .....bdbdbddddbdbdb.....
    .....cdbbdbbbbdbbdc.....
    .....cbdbbddddbbdbc.....
    .....efbddbbbbddbce.....
    .....eeffbddddbccee.....
    .....eeeeffcccceee......
    .....ceeeeeeeeeeee......
    .....ceeeeeeeeeeee......
    .....feeeeeeeeeeee......
    .....cceeeeeeeeeee......
    ......feeeeeeeeeee......
    .....6fceeeeeeeeee6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6666776...
    ..67768e67766777667776..
    ...668ee7768867788666...
    ......ee77eeee77ecee....
    ......ee6eeeeee6eef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeecf.....
    ......ceeeeeeeeeecf.....
    ......ceeeeeeeeeeff.....
    ......feeeeeeeeeefe.....
    .....6feeeeeeeeeef6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6667776...
    ..6776ee67777777667776..
    ...668ee7768867788666...
    ......ee77eeee67ee......
    ......ee6eeeeee6ce......
    ......eefeeeeeeece......
    ......eeceeeeeeece......
    ......eeceeeeeeefe......
    ......eeceeeeeeefe......
    ......eeeeeeeeeefe......
    ......eeeeeeeeeece......
    .....6eeeeeeeeeece6.....
    ....6776eeeeeeeee676....
    ...6776666eeee6766776...
    ..6776ee77777777667776..
    ...668ce7768867788666...
    ......ce77eeee67ee......
    ......ce6eeeeee6ee......
    ......ceeeeeeeeeee......
    ......fcceeeeeecee......
    ......fccceeececce......
    ......fcceeecceccc......
    ......fccceecceccc......
    ......fccccceceecc......
    .....6fccccccccccf6.....
    ....6776ccccccccc676....
    ...6776676cccc6766776...
    ..6776cc77777777667776..
    ...668cc7768867788666...
    ......cc77cccc67cf......
    ......cc6cccccc6cf......
`));
pillars.push(sprites.create(img`
    ........................
    ........................
    ..........bbbb..........
    ........bbddddbb........
    .......bddbbbbddb.......
    ......bdbbddddbbdb......
    .....bdbbdbbbbdbbdb.....
    .....bdbdbddddbdbdb.....
    .....cdbbdbbbbdbbdc.....
    .....cbdbbddddbbdbc.....
    .....efbddbbbbddbce.....
    .....eeffbddddbccee.....
    .....eeeeffcccceee......
    .....ceeeeeeeeeeee......
    .....ceeeeeeeeeeee......
    .....feeeeeeeeeeee......
    .....cceeeeeeeeeee......
    ......feeeeeeeeeee......
    .....6fceeeeeeeeee6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6666776...
    ..67768e67766777667776..
    ...668ee7768867788666...
    ......ee77eeee77ecee....
    ......ee6eeeeee6eef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeeef.....
    ......eeeeeeeeeeecf.....
    ......ceeeeeeeeeecf.....
    ......ceeeeeeeeeeff.....
    ......feeeeeeeeeefe.....
    .....6feeeeeeeeeef6.....
    ....6776eeeeeeeee676....
    ...6777666eeee6667776...
    ..6776ee67777777667776..
    ...668ee7768867788666...
    ......ee77eeee67ee......
    ......ee6eeeeee6ce......
    ......eefeeeeeeece......
    ......eeceeeeeeece......
    ......eeceeeeeeefe......
    ......eeceeeeeeefe......
    ......eeeeeeeeeefe......
    ......eeeeeeeeeece......
    .....6eeeeeeeeeece6.....
    ....6776eeeeeeeee676....
    ...6776666eeee6766776...
    ..6776ee77777777667776..
    ...668ce7768867788666...
    ......ce77eeee67ee......
    ......ce6eeeeee6ee......
    ......ceeeeeeeeeee......
    ......fcceeeeeecee......
    ......fccceeececce......
    ......fcceeecceccc......
    ......fccceecceccc......
    ......fccccceceecc......
    .....6fccccccccccf6.....
    ....6776ccccccccc676....
    ...6776676cccc6766776...
    ..6776cc77777777667776..
    ...668cc7768867788666...
    ......cc77cccc67cf......
    ......cc6cccccc6cf......
`));
 pillars[0].setPosition(40, 60);
 pillars[1].setPosition(120, 60);
 
 let playerSprite = sprites.create(img`
     . . . . . . . . . . b b b . . .
     . . . . . . . . . b b 5 b . . .
     . . . . . . . . . b 5 5 b . . .
     . . . . . . b b b b b b . . . .
     . . . . . b b 5 5 5 5 5 b . . .
     . b b b b b 5 5 5 5 5 5 5 b . .
     . b d 5 b 5 5 5 5 5 5 5 5 b . .
     . . b 5 5 b 5 d 1 f 5 d 4 f . .
     . . b d 5 5 b 1 f f 5 4 4 c . .
     . . . b 5 5 5 d f b 4 4 4 4 b .
     . . . c d 5 5 b 5 4 4 4 4 4 4 b
     . . . . c c b 5 5 5 5 5 5 5 b .
 `, SpriteKind.Player);
playerSprite.setFlag(SpriteFlag.StayInScreen, true);
playerSprite.setPosition(0, 0);
let pressed = false;
let frametime = game.runtime();
let delta = 0
game.onUpdate(function() {
    if (pressed) {
        delta += game.runtime() - frametime;
    }
    frametime = game.runtime();
    let x = playerSprite.x;
    let y = playerSprite.y;
    let previousX = playerSprite.x;
    let previousY = playerSprite.y;
    let speedx = 16;
    let speedy = 12;
    if (!pressed && controller.anyButton.isPressed()) {
        if (controller.right.isPressed()) {
            x += speedx;
        }
        else if (controller.left.isPressed()) {
            x -= speedx;
        }
        else if (controller.up.isPressed()) {
            y -= speedy;
        }
        else if (controller.down.isPressed()) {
            y += speedy;
        }
        pressed = true;
    }
    
    playerSprite.setPosition(x, y);  
    
    for(let i = 0; i < pillars.length; i++) {
        if (playerSprite.overlapsWith(pillars[i])) {
            playerSprite.setPosition(previousX, previousY);
            break;
        }
    }

    if (delta > 150) {
        pressed = false;
        delta = 0
    }
})
